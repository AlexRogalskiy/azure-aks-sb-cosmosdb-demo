https://istio.io/docs/setup/kubernetes/sidecar-injection.html#pod-spec-requirements

gcloud beta container `
  --project "voter-api-kub-demo" clusters create "voter-api-istio-demo" `
  --enable-kubernetes-alpha `
  --username="admin" `
  --zone "us-central1-a" `
  --cluster-version "1.8.4-gke.0" `
  --machine-type "n1-standard-1" `
  --num-nodes "3" `
  --labels environment=development

# Get Cluster Credentials
gcloud container clusters get-credentials voter-api-istio-demo `
  --zone us-central1-a --project voter-api-kub-demo

# Install Istio 0.4.0
https://cloud.google.com/kubernetes-engine/docs/tutorials/istio-on-gke

# Allow Istio to create RBAC accounts
kubectl create clusterrolebinding cluster-admin-binding `
  --user="$(gcloud config get-value core/account)" `
  --clusterrole=cluster-admin `


cd $HOME\Documents\Personal\Google_Cloud_Article\istio-0.4.0
kubectl apply `
  -f install/kubernetes/istio-auth.yaml `
  -f .\install\kubernetes\addons\prometheus.yaml `
  -f .\install\kubernetes\addons\grafana.yaml `
  -f .\install\kubernetes\addons\servicegraph.yaml `
  -f .\install\kubernetes\addons\zipkin.yaml `
  -f .\install\kubernetes\addons\zipkin-to-stackdriver.yaml

https://istio.io/docs/setup/kubernetes/quick-start-gke-dm.html

# RBAC for Kubernetes Dashboard access
kubectl create clusterrolebinding `
  --user system:serviceaccount:kube-system:default `
  kube-system-cluster-admin --clusterrole cluster-admin

# Install Secrets (real values not kept in git project)
cd $HOME\Documents\Personal\AKS_Article\secrets\
.\secrets.bat

# Install Voter API Services and Ingress (Deployments requires istioctl kube-inject later)
cd $HOME\Source\Repos\voter-app-azure-demo\azure-aks-sb-cosmosdb-demo\kubernetes\voter-api-atlas\
.\create-voter-api_part2.bat

https://technology.amis.nl/2017/10/25/first-steps-with-istio-on-kubernetes-on-minikube-on-windows-10/
# Works on Windows with Git Bash
cd $HOME\Source\Repos\voter-app-azure-demo\azure-aks-sb-cosmosdb-demo\kubernetes\voter-api-atlas\

# Switching to Windows Git Bash
cd ~/Source/Repos/voter-app-azure-demo/azure-aks-sb-cosmosdb-demo/kubernetes/voter-api-atlas

# Windows hack around recommended injection method
# kubectl create -f <(istioctl kube-inject -f <your-app-spec>.yaml)

istioctl kube-inject –kubeconfig "~/.kube/config" \
  -f services/candidate-deployment.yaml \
  --includeIPRanges=10.8.0.0/14,10.11.240.0/20 > \
  candidate-deployment-istio.yaml; \
  kubectl apply -f candidate-deployment-istio.yaml; \
  rm candidate-deployment-istio.yaml

istioctl kube-inject –kubeconfig "~/.kube/config" \
  -f services/election-deployment.yaml \
  --includeIPRanges=10.8.0.0/14,10.11.240.0/20 > \
  election-deployment-istio.yaml; \
  kubectl apply -f election-deployment-istio.yaml; \
  rm election-deployment-istio.yaml

istioctl kube-inject –kubeconfig "~/.kube/config" \
  -f services/voter-deployment.yaml \
  --includeIPRanges=10.8.0.0/14,10.11.240.0/20 > \
  voter-deployment-istio.yaml; \
  kubectl apply -f voter-deployment-istio.yaml; \
  rm voter-deployment-istio.yaml

kubectl get ingress voter-ingress -o wide -n voter-api

# Check Quotas
gcloud compute project-info describe --project "voter-api-kub-demo"
